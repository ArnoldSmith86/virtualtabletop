{
  "_meta": {
    "version": 8,
    "info": {
      "name": "Color",
      "image": "/assets/803671191_3068",
      "rules": "",
      "bgg": "",
      "year": "2022",
      "mode": "Tutorial",
      "time": "0",
      "attribution": "",
      "players": "1",
      "language": "en-US",
      "variant": "Examples"
    }
  },
  "8fr3": {
    "type": "label",
    "text": "Color Functions: Examples",
    "css": "font-size: 60px",
    "height": 160,
    "width": 1000,
    "x": 290,
    "z": 26392,
    "id": "8fr3",
    "y": 1
  },
  "redSlider": {
    "id": "redSlider",
    "width": 56,
    "height": 84,
    "z": 505,
    "classes": "classicPiece",
    "color": "red",
    "xChangeRoutine": [
      {
        "func": "SET",
        "collection": [
          "testMe1",
          "testMe2"
        ],
        "property": "r",
        "value": "${PROPERTY x}"
      },
      {
        "func": "IF",
        "operand1": "${PROPERTY x}",
        "relation": ">=",
        "operand2": 255,
        "thenRoutine": [
          {
            "func": "SET",
            "collection": "thisButton",
            "property": "x",
            "value": 255
          }
        ],
        "elseRoutine": [
          {
            "func": "IF",
            "operand1": "${PROPERTY x}",
            "relation": "<=",
            "operand2": 0,
            "thenRoutine": [
              {
                "func": "SET",
                "collection": "thisButton",
                "property": "x",
                "value": 0
              }
            ]
          }
        ]
      }
    ],
    "yChangeRoutine": [
      {
        "func": "SET",
        "collection": "thisButton",
        "property": "y",
        "value": 550
      }
    ],
    "y": 550
  },
  "slide1": {
    "id": "slide1",
    "y": 600,
    "width": 310,
    "height": 50,
    "z": 24,
    "movable": false,
    "css": {
      "background": "linear-gradient(to right, hsl(0,100%,80%), hsl(0,100%,60%))"
    }
  },
  "slide2": {
    "id": "slide2",
    "y": 700,
    "width": 310,
    "height": 50,
    "z": 24,
    "movable": false,
    "css": {
      "background": "linear-gradient(to right, hsl(120,100%,90%), hsl(120,100%,50%))"
    }
  },
  "greenSlider": {
    "id": "greenSlider",
    "y": 650,
    "width": 56,
    "height": 84,
    "z": 508,
    "classes": "classicPiece",
    "color": "green",
    "xChangeRoutine": [
      {
        "func": "SET",
        "collection": [
          "testMe1",
          "testMe2"
        ],
        "property": "g",
        "value": "${PROPERTY x}"
      },
      {
        "func": "IF",
        "operand1": "${PROPERTY x}",
        "relation": ">=",
        "operand2": 255,
        "thenRoutine": [
          {
            "func": "SET",
            "collection": "thisButton",
            "property": "x",
            "value": 255
          }
        ],
        "elseRoutine": [
          {
            "func": "IF",
            "operand1": "${PROPERTY x}",
            "relation": "<=",
            "operand2": 0,
            "thenRoutine": [
              {
                "func": "SET",
                "collection": "thisButton",
                "property": "x",
                "value": 0
              }
            ]
          }
        ]
      }
    ],
    "yChangeRoutine": [
      {
        "func": "SET",
        "collection": "thisButton",
        "property": "y",
        "value": 650
      }
    ],
    "x": 110
  },
  "slide3": {
    "id": "slide3",
    "y": 800,
    "width": 310,
    "height": 50,
    "z": 24,
    "movable": false,
    "css": {
      "background": "linear-gradient(to right, hsl(240,100%,90%), hsl(240,100%,50%))"
    }
  },
  "slide4": {
    "id": "slide4",
    "y": 900,
    "width": 310,
    "height": 50,
    "z": 24,
    "movable": false,
    "css": {
      "background": "linear-gradient(to right, rgb(190,190,190), rgb(80,80,80))"
    }
  },
  "blueSlider": {
    "id": "blueSlider",
    "y": 750,
    "width": 56,
    "height": 84,
    "z": 519,
    "classes": "classicPiece",
    "color": "blue",
    "xChangeRoutine": [
      {
        "func": "SET",
        "collection": [
          "testMe1",
          "testMe2"
        ],
        "property": "b",
        "value": "${PROPERTY x}"
      },
      {
        "func": "IF",
        "operand1": "${PROPERTY x}",
        "relation": ">=",
        "operand2": 255,
        "thenRoutine": [
          {
            "func": "SET",
            "collection": "thisButton",
            "property": "x",
            "value": 255
          }
        ],
        "elseRoutine": [
          {
            "func": "IF",
            "operand1": "${PROPERTY x}",
            "relation": "<=",
            "operand2": 0,
            "thenRoutine": [
              {
                "func": "SET",
                "collection": "thisButton",
                "property": "x",
                "value": 0
              }
            ]
          }
        ]
      }
    ],
    "yChangeRoutine": [
      {
        "func": "SET",
        "collection": "thisButton",
        "property": "y",
        "value": 750
      }
    ],
    "x": 111
  },
  "6i4v": {
    "id": "6i4v",
    "y": 850,
    "width": 56,
    "height": 84,
    "z": 489,
    "classes": "classicPiece",
    "color": "#4a4a4a",
    "xChangeRoutine": [
      {
        "func": "SET",
        "collection": [
          "redSlider",
          "greenSlider",
          "blueSlider"
        ],
        "property": "x",
        "value": "${PROPERTY x}"
      },
      {
        "func": "IF",
        "operand1": "${PROPERTY x}",
        "relation": ">=",
        "operand2": 255,
        "thenRoutine": [
          {
            "func": "SET",
            "collection": "thisButton",
            "property": "x",
            "value": 255
          }
        ],
        "elseRoutine": [
          {
            "func": "IF",
            "operand1": "${PROPERTY x}",
            "relation": "<=",
            "operand2": 0,
            "thenRoutine": [
              {
                "func": "SET",
                "collection": "thisButton",
                "property": "x",
                "value": 0
              }
            ]
          }
        ]
      }
    ],
    "yChangeRoutine": [
      {
        "func": "SET",
        "collection": "thisButton",
        "property": "y",
        "value": 850
      }
    ],
    "x": 186
  },
  "testMe1": {
    "id": "testMe1",
    "x": 325,
    "y": 625,
    "z": 378,
    "css": {
      "background": "${PROPERTY cycleColor}",
      "color": "${PROPERTY textColor}"
    },
    "text": "Move the pawn sliders individually (or as a group using the gray one). The colors in this box are updated automatically using the default values of 'colorContrast'.",
    "b": 111,
    "cycleColor": "rgb(0,110,111)",
    "g": 110,
    "r": 0,
    "textColor": "#ffffff",
    "bChangeRoutine": [
      {
        "func": "CALL",
        "routine": "colorChangeRoutine"
      }
    ],
    "colorChangeRoutine": [
      "var rgb = 'rgb(' + ${PROPERTY r}",
      "var rgb = ${rgb} + ','",
      "var rgb = ${rgb} + ${PROPERTY g}",
      "var rgb = ${rgb} + ','",
      "var rgb = ${rgb} + ${PROPERTY b}",
      "var rgb = ${rgb} + ')'",
      "var textTest = colorContrast ${rgb}",
      {
        "func": "SET",
        "collection": "thisButton",
        "property": "cycleColor",
        "value": "${rgb}"
      },
      {
        "func": "SET",
        "collection": "thisButton",
        "property": "textColor",
        "value": "${textTest}"
      },
      "var contrast = colorContrastRatio ${PROPERTY cycleColor} ${PROPERTY textColor}",
      "var contrast = ${contrast} toFixed 2",
      {
        "func": "LABEL",
        "label": "contrast1",
        "value": "${contrast}"
      }
    ],
    "gChangeRoutine": [
      {
        "func": "CALL",
        "routine": "colorChangeRoutine"
      }
    ],
    "rChangeRoutine": [
      {
        "func": "CALL",
        "routine": "colorChangeRoutine"
      }
    ],
    "width": 300,
    "movable": false
  },
  "testMe2": {
    "id": "testMe2",
    "x": 325,
    "y": 825,
    "z": 379,
    "css": {
      "background": "${PROPERTY cycleColor}",
      "color": "${PROPERTY textColor}"
    },
    "text": "Use the buttons above to set the intensity of the 'colorContrast' change of this text between -1 and 1.",
    "b": 111,
    "cycleColor": "rgb(0,110,111)",
    "g": 110,
    "r": 0,
    "textColor": "#99ffff",
    "bChangeRoutine": [
      {
        "func": "CALL",
        "routine": "colorChangeRoutine"
      }
    ],
    "colorChangeRoutine": [
      "var rgb = 'rgb(' + ${PROPERTY r}",
      "var rgb = ${rgb} + ','",
      "var rgb = ${rgb} + ${PROPERTY g}",
      "var rgb = ${rgb} + ','",
      "var rgb = ${rgb} + ${PROPERTY b}",
      "var rgb = ${rgb} + ')'",
      "var textTest = colorContrast ${rgb} ${PROPERTY text OF intensity}",
      {
        "func": "SET",
        "collection": "thisButton",
        "property": "cycleColor",
        "value": "${rgb}"
      },
      {
        "func": "SET",
        "collection": "thisButton",
        "property": "textColor",
        "value": "${textTest}"
      },
      "var contrast = colorContrastRatio ${PROPERTY cycleColor} ${PROPERTY textColor}",
      "var contrast = ${contrast} toFixed 2",
      {
        "func": "LABEL",
        "label": "contrast2",
        "value": "${contrast}"
      }
    ],
    "gChangeRoutine": [
      {
        "func": "CALL",
        "routine": "colorChangeRoutine"
      }
    ],
    "rChangeRoutine": [
      {
        "func": "CALL",
        "routine": "colorChangeRoutine"
      }
    ],
    "width": 300,
    "movable": false
  },
  "1xlxD": {
    "id": "1xlxD",
    "parent": "intensity",
    "fixedParent": true,
    "x": -38,
    "y": 1,
    "width": 36,
    "height": 36,
    "type": "button",
    "movableInEdit": false,
    "classes": "symbols",
    "css": "font-size: 28px",
    "text": "remove",
    "clickRoutine": [
      {
        "func": "IF",
        "operand1": "${PROPERTY text OF intensity}",
        "relation": "<=",
        "operand2": -1,
        "thenRoutine": [
          {
            "func": "LABEL",
            "label": "${PROPERTY parent}",
            "mode": "set",
            "value": -1
          }
        ],
        "elseRoutine": [
          {
            "func": "LABEL",
            "label": "${PROPERTY parent}",
            "mode": "dec",
            "value": 0.1
          }
        ]
      }
    ]
  },
  "1xlxU": {
    "id": "1xlxU",
    "parent": "intensity",
    "fixedParent": true,
    "x": 68,
    "y": 1,
    "width": 36,
    "height": 36,
    "type": "button",
    "movableInEdit": false,
    "classes": "symbols",
    "css": "font-size: 28px",
    "text": "add",
    "clickRoutine": [
      {
        "func": "IF",
        "operand1": "${PROPERTY text OF intensity}",
        "relation": ">=",
        "operand2": 1,
        "thenRoutine": [
          {
            "func": "LABEL",
            "label": "${PROPERTY parent}",
            "mode": "set",
            "value": 1
          }
        ],
        "elseRoutine": [
          {
            "func": "LABEL",
            "label": "${PROPERTY parent}",
            "mode": "inc",
            "value": 0.1
          }
        ]
      }
    ]
  },
  "intensity": {
    "type": "label",
    "id": "intensity",
    "x": 438,
    "y": 781,
    "width": 65,
    "height": 40,
    "z": 26453,
    "css": "font-size: 30px;",
    "text": 0.6
  },
  "notes6": {
    "id": "notes6",
    "x": 633,
    "y": 873,
    "height": 20,
    "z": 391,
    "movable": false,
    "text": "Contrast:"
  },
  "contrast2": {
    "id": "contrast2",
    "x": 633,
    "y": 900,
    "height": 30,
    "z": 389,
    "movable": false,
    "text": 5.23
  },
  "contrast1": {
    "id": "contrast1",
    "x": 633,
    "y": 700,
    "height": 30,
    "z": 389,
    "movable": false,
    "text": 6.07
  },
  "notes5": {
    "id": "notes5",
    "x": 633,
    "y": 673,
    "height": 20,
    "z": 391,
    "movable": false,
    "text": "Contrast:"
  },
  "seat1": {
    "type": "seat",
    "id": "seat1",
    "x": 286,
    "y": 251,
    "z": 311,
    "css": {
      "background": "${PROPERTY mainColor}",
      "color": "${PROPERTY textColor}",
      "--wcShadowTurn": "0px 0px 20px 5px ${PROPERTY glowColor}"
    },
    "mainColor": "#eca409",
    "textColor": "#000000",
    "clickRoutine": [
      {
        "func": "IF",
        "operand1": "${PROPERTY player}",
        "operand2": "",
        "thenRoutine": [
          {
            "func": "SET",
            "collection": "thisButton",
            "property": "mainColor",
            "value": "${playerColor}"
          },
          "var newText = colorContrast ${PROPERTY mainColor}",
          "var newGlow = colorContrast ${PROPERTY mainColor} 0.3",
          {
            "func": "SET",
            "collection": "thisButton",
            "property": "textColor",
            "value": "${newText}"
          },
          {
            "func": "SET",
            "collection": "thisButton",
            "property": "glowColor",
            "value": "${newGlow}"
          }
        ],
        "elseRoutine": [
          {
            "func": "SET",
            "collection": "thisButton",
            "property": "mainColor",
            "value": "#ffffff"
          },
          {
            "func": "SET",
            "collection": "thisButton",
            "property": "textColor",
            "value": "#000000"
          },
          {
            "func": "SET",
            "collection": "thisButton",
            "property": "glowColor",
            "value": null
          }
        ]
      },
      {
        "func": "CLICK",
        "collection": "thisButton",
        "mode": "ignoreClickRoutine"
      }
    ],
    "turn": true,
    "glowColor": "#a05800",
    "player": "Guest143",
    "color": "#eca409"
  },
  "seat2": {
    "type": "seat",
    "id": "seat2",
    "index": 2,
    "x": 563,
    "y": 250,
    "z": 307,
    "color": "#00a152",
    "player": "Player 2"
  },
  "button5": {
    "type": "button",
    "id": "button5",
    "x": 467,
    "y": 235,
    "z": 310,
    "text": "Turn",
    "clickRoutine": [
      {
        "func": "TURN"
      }
    ]
  },
  "notes7": {
    "id": "notes7",
    "x": 331,
    "y": 330,
    "width": 360,
    "z": 473,
    "movable": false,
    "css": {
      "font-size": "19px"
    },
    "text": "The left seat is a demonstration of what a seat could look like using 'colorContrast'."
  },
  "pin1": {
    "id": "pin1",
    "x": 1010,
    "y": 250,
    "width": 35.85,
    "height": 43.83,
    "z": 439,
    "classes": "pinPiece",
    "clickRoutine": [
      "var startColor = ${playerColor}",
      "var playerLum = colorLuminance ${startColor}",
      "//luminance is in linear light scale, the calculation below approximates a perceptual scale",
      "var playerLightness = ${playerLum} ** 0.454545",
      {
        "func": "IF",
        "operand1": "${playerLightness}",
        "relation": ">",
        "operand2": 0.7,
        "thenRoutine": [
          {
            "func": "CALL",
            "routine": "lumChangeRoutine",
            "widget": "pin1",
            "arguments": {
              "light": true
            },
            "variable": "startColor"
          }
        ],
        "elseRoutine": [
          {
            "func": "IF",
            "operand1": "${playerLightness}",
            "relation": "<",
            "operand2": 0.3,
            "thenRoutine": [
              {
                "func": "CALL",
                "routine": "lumChangeRoutine",
                "widget": "pin1",
                "arguments": {
                  "light": false
                },
                "variable": "startColor"
              }
            ]
          }
        ]
      },
      {
        "func": "SET",
        "collection": [
          "pin1"
        ],
        "property": "color",
        "value": "${startColor}"
      },
      "var c2 = colorContrast ${PROPERTY color OF pin1} -0.14",
      "var c3 = colorContrast ${PROPERTY color OF pin1} -0.07",
      "var c4 = colorContrast ${PROPERTY color OF pin1} 0.07",
      "var c5 = colorContrast ${PROPERTY color OF pin1} 0.14",
      "var i = 2",
      {
        "func": "FOREACH",
        "in": [
          "${c2}",
          "${c3}",
          "${c4}",
          "${c5}"
        ],
        "loopRoutine": [
          {
            "func": "SET",
            "collection": [
              "pin${i}"
            ],
            "property": "color",
            "value": "${value}"
          },
          "var i = ${i} + 1"
        ]
      }
    ],
    "movable": false,
    "lumChangeRoutine": [
      {
        "func": "IF",
        "condition": "${light}",
        "thenRoutine": [
          "var diff = 1 - ${playerLightness}",
          "var diff = 0.3 - ${diff}"
        ],
        "elseRoutine": [
          "var diff = 0.3 - ${playerLightness}"
        ]
      },
      "var result = colorContrast ${playerColor} ${diff}"
    ],
    "color": "#840584"
  },
  "pin2": {
    "id": "pin2",
    "x": 910,
    "y": 250,
    "width": 35.85,
    "height": 43.83,
    "z": 434,
    "classes": "pinPiece",
    "movable": false,
    "movableInEdit": true,
    "inheritFrom": {
      "pin1": "clickRoutine"
    },
    "color": "#600060"
  },
  "pin3": {
    "id": "pin3",
    "x": 960,
    "y": 250,
    "width": 35.85,
    "height": 43.83,
    "z": 434,
    "classes": "pinPiece",
    "movable": false,
    "movableInEdit": true,
    "inheritFrom": {
      "pin1": "clickRoutine"
    },
    "color": "#720072"
  },
  "pin4": {
    "id": "pin4",
    "x": 1060,
    "y": 250,
    "width": 35.85,
    "height": 43.83,
    "z": 434,
    "classes": "pinPiece",
    "color": "#961796",
    "movable": false,
    "movableInEdit": true,
    "inheritFrom": {
      "pin1": "clickRoutine"
    }
  },
  "pin5": {
    "id": "pin5",
    "x": 1110,
    "y": 250,
    "width": 35.85,
    "height": 43.83,
    "z": 434,
    "classes": "pinPiece",
    "color": "#a829a8",
    "movable": false,
    "movableInEdit": true,
    "inheritFrom": {
      "pin1": "clickRoutine"
    }
  },
  "notes8": {
    "id": "notes8",
    "x": 866,
    "y": 330,
    "width": 360,
    "z": 474,
    "movable": false,
    "css": {
      "font-size": "19px"
    },
    "text": "Click a pin to change the color scheme to one based on your current playerColor. If the playerColor is too light or dark, it will be adjusted slightly to allow for the color scheme to be visible on all the pins."
  },
  "green2": {
    "id": "green2",
    "x": 1360,
    "y": 216,
    "z": 521,
    "image": "/assets/-965538703_6169",
    "svgReplaces": {
      "myColor1": "c2",
      "myColor2": "c3",
      "myColor3": "c1",
      "myColor4": "c4",
      "myColor5": "c5",
      "myColor6": "c6"
    },
    "clickRoutine": [
      "var startColor = ${playerColor}",
      "var playerLum = colorLuminance ${startColor}",
      "//luminance is in linear light scale, the calculation below approximates a perceptual scale",
      "var playerLightness = ${playerLum} ** 0.454545",
      {
        "func": "IF",
        "operand1": "${playerLightness}",
        "relation": ">",
        "operand2": 0.7,
        "thenRoutine": [
          {
            "func": "CALL",
            "routine": "lumChangeRoutine",
            "widget": "pin1",
            "arguments": {
              "light": true
            },
            "variable": "startColor"
          }
        ],
        "elseRoutine": [
          {
            "func": "IF",
            "operand1": "${playerLightness}",
            "relation": "<",
            "operand2": 0.3,
            "thenRoutine": [
              {
                "func": "CALL",
                "routine": "lumChangeRoutine",
                "widget": "pin1",
                "arguments": {
                  "light": false
                },
                "variable": "startColor"
              }
            ]
          }
        ]
      },
      {
        "func": "SET",
        "collection": [
          "thisButton"
        ],
        "property": "c1",
        "value": "${startColor}"
      },
      "var c2 = colorContrast ${PROPERTY c1} -0.2",
      "var c3 = colorContrast ${PROPERTY c1} -0.1",
      "var c4 = colorContrast ${PROPERTY c1} 0.1",
      "var c5 = colorContrast ${PROPERTY c1} 0.2",
      "var c6 = colorContrast ${PROPERTY c1} 0.25",
      "var c7 = colorContrast ${PROPERTY c1} -0.25",
      "var i = 2",
      {
        "func": "FOREACH",
        "in": [
          "${c2}",
          "${c3}",
          "${c4}",
          "${c5}",
          "${c6}",
          "${c7}"
        ],
        "loopRoutine": [
          {
            "func": "SET",
            "collection": [
              "thisButton"
            ],
            "property": "c${i}",
            "value": "${value}"
          },
          "var i = ${i} + 1"
        ]
      }
    ],
    "lumChangeRoutine": [
      {
        "func": "IF",
        "condition": "${light}",
        "thenRoutine": [
          "var diff = 1 - ${playerLightness}",
          "var diff = 0.3 - ${diff}"
        ],
        "elseRoutine": [
          "var diff = 0.3 - ${playerLightness}"
        ]
      },
      "var result = colorContrast ${playerColor} ${diff}"
    ],
    "c2": "#91d56c",
    "c3": "#78bc53",
    "c4": "#458920",
    "c5": "#2b6f06",
    "c6": "#1e6200",
    "c1": "#5ea239",
    "c7": "#9ee279"
  },
  "notes9": {
    "id": "notes9",
    "x": 1250,
    "y": 330,
    "width": 330,
    "z": 474,
    "movable": false,
    "css": {
      "font-size": "19px"
    },
    "text": "The marble, from the VTT Assets list, can be changed the same way. Click on it to apply playerColor."
  }
}